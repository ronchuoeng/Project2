{% extends "auctions/layout.html" %}

{% block body %}
    <div class="div_listing">
        <div class="div_listing_img">
         {% if listing.img %}
            <img src="{{ listing.img }}" alt="{{ listing.title }}" style="min-width:80%;max-width:100%;min-height:50%;max-height:90%;">
         {% else %}
            No Image.
         {% endif %}
        </div>
        <div class="div_listing_body">
            <div class="div_listing_information">
                <h1>{{ listing.title }}</h1>
                <h4> S/B: ${{ listing.s_bid }}</h4>
                {% if listing.c_off %}
                    <h4> C/O: ${{ listing.c_off.bid_price }}</h4>
                    {% if listing.c_off.bidder == request.user %}
                        (You are the highest bid.)
                    {% endif %}
                {% else %}
                    {{ empty }}
                {% endif %}
                <br>
                <strong>Description:</strong><br>
                {{ listing.description }}
                <br>
                <p style="color:rgb(181, 174, 174)">Category: {{ listing.category }}</p>
                <p>Listed by: {{ listing.seller }} </p>
            </div>
            <div class="div_listing_function">
                <!-- Seller's page -->
                {% if listing.seller == request.user %}
                    <!-- close auction here !!!!! TO DO-->
                {% else %}
                <!-- Others' page -->
                <div class="div_place_bid">
                    <form action="{% url 'bidding' listing.id %}" method="post">
                        {% csrf_token %}
                        {{ bidding }}                       
                        <input class="place_bid" type="submit" value="Place Bid">
                    </form>
                </div> 
                <div class="div_watchlist">
                    
                    <form action="{% url 'watchlist' listing.id %}" method="post">
                        {% csrf_token %}
                        {% if request.user.id in watcher.user %}
                            <input class="watchlist" type="submit" value="Remove Watchlist">
                        {% else %}
                            <input class="watchlist" type="submit" value="Add to Watchlist">
                        {% endif %}
                    </form>
                </div>
                {% if message %}
                    <p style="color:red;font-weight:bold;"> {{ message }} </p>
                {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
    <hr>
{% endblock %}